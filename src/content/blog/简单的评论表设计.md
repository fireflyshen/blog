---
author: firefly
pubDatetime: 2022-09-23T15:22:00Z
modDatetime: 2023-12-21T09:12:47.400Z
title: 简单呐的评论表的设计
slug: comment-table-design
featured: false
draft: false
tags:
  - comments
  - SQL
description: " "
---

目前的评论系统大多其实都是二级评论，盖楼的那种基本没有了，还有一种是嵌套层级的那种，比如raddit的评论就是这个，但是呢，肯定也是不能的无限嵌套的，不然没有办法显示，如果我😯没有记错的话应该是十层，如果超过十层可能要打开新的页面来显示，不过基本上很少有超过5层的回复，

首先先来讲，二级回复，这种形式的结构是如下这样的

<div style="font-family: Arial, sans-serif; line-height: 1.6; max-width: 800px; margin: 0 auto; background-color: #f0f0f0; padding: 20px;">
  <div style="background-color: #fff; border: 1px solid #ddd; border-radius: 4px; padding: 10px; margin-bottom: 10px;">
    <div style="margin-bottom: 5px;">这是第一个主评论。</div>
    <div style="font-size: 0.8em; color: #666;">用户1 · 2小时前 | 回复</div>
    <div style="margin-left: 20px; border-left: 2px solid #ddd; padding-left: 10px;">
      <div style="background-color: #fff; border: 1px solid #ddd; border-radius: 4px; padding: 10px; margin-top: 10px;">
        <div style="margin-bottom: 5px;">这是对主评论1的直接回复。</div>
        <div style="font-size: 0.8em; color: #666;">用户2 · 1小时前 | 回复</div>
      </div>
      <div style="background-color: #fff; border: 1px solid #ddd; border-radius: 4px; padding: 10px; margin-top: 10px;">
        <div style="margin-bottom: 5px;">这是对主评论1的另一个直接回复。</div>
        <div style="font-size: 0.8em; color: #666;">用户3 · 30分钟前 | 回复</div>
      </div>
      <div style="color: #0066cc; cursor: pointer; margin-top: 5px;">加载更多回复...</div>
    </div>
  </div>
  
  <div style="background-color: #fff; border: 1px solid #ddd; border-radius: 4px; padding: 10px; margin-bottom: 10px;">
    <div style="margin-bottom: 5px;">这是第二个主评论。</div>
    <div style="font-size: 0.8em; color: #666;">用户4 · 3小时前 | 回复</div>
    <div style="margin-left: 20px; border-left: 2px solid #ddd; padding-left: 10px;">
      <div style="background-color: #fff; border: 1px solid #ddd; border-radius: 4px; padding: 10px; margin-top: 10px;">
        <div style="margin-bottom: 5px;">这是对主评论2的回复。</div>
        <div style="font-size: 0.8em; color: #666;">用户5 · 2小时前 | 回复</div>
      </div>
    </div>
  </div>
  
  <div style="color: #0066cc; cursor: pointer; margin-top: 5px;">加载更多评论...</div>
</div>

上面的那种结构实际上就是把原来嵌套的评论进行打平，原来的结构大致如下

```mermaid
graph TD
    A[帖子] --> B[主评论 1]
    A --> C[主评论 2]
    A --> D[主评论 3]

    B --> B1[回复 1.1]
    B --> B2[回复 1.2]
    B --> B3[回复 1.3]

    C --> C1[回复 2.1]
    C --> C2[回复 2.2]

    D --> D1[回复 3.1]

    B1 --> B1a[回复 1.1.1]
    B1 --> B1b[回复 1.1.2]

    C1 --> C1a[回复 2.1.1]

    style A fill:#f9f,stroke:#333,stroke-width:4px
    style B fill:#bbf,stroke:#333,stroke-width:2px
    style C fill:#bbf,stroke:#333,stroke-width:2px
    style D fill:#bbf,stroke:#333,stroke-width:2px
    style B1 fill:#dfd,stroke:#333,stroke-width:1px
    style B2 fill:#dfd,stroke:#333,stroke-width:1px
    style B3 fill:#dfd,stroke:#333,stroke-width:1px
    style C1 fill:#dfd,stroke:#333,stroke-width:1px
    style C2 fill:#dfd,stroke:#333,stroke-width:1px
    style D1 fill:#dfd,stroke:#333,stroke-width:1px
    style B1a fill:#ffe,stroke:#333,stroke-width:1px
    style B1b fill:#ffe,stroke:#333,stroke-width:1px
    style C1a fill:#ffe,stroke:#333,stroke-width:1px
```
